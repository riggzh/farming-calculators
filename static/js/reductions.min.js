"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var l=0;l<t.length;l++){var i=t[l];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,l,i){return l&&e(t.prototype,l),i&&e(t,i),t}}(),reductionsCalc=function(){function e(){_classCallCheck(this,e),this.domEl={dmgSource:this.getEl("dmg-source"),dmgType:this.getEl("dmg-type"),curMulti:this.getEl("cur-multi"),newMulti:this.getEl("new-multi"),calcBtn:this.getEl("btn-calc"),dmgIncrease:this.getEl("damage-increase"),stageIncrease:this.getEl("stage-increase")},this.dmgSource=void 0,this.dmgType=void 0,this.curMulti=void 0,this.newMulti=void 0,this.formulas=new mathFormulas,this.setGlobalValues(),this.populateValues(),this.calcRelativeDamage(),this.bindEvents()}return _createClass(e,[{key:"setGlobalValues",value:function(){localStorage.getItem("reductDmgSource")||localStorage.getItem("reductDmgType")||localStorage.getItem("reductCurMulti")||localStorage.getItem("reductNewMulti")?(this.dmgSource=localStorage.getItem("reductDmgSource"),this.dmgType=localStorage.getItem("reductDmgType"),this.curMulti=parseFloat(localStorage.getItem("reductCurMulti")),this.newMulti=parseFloat(localStorage.getItem("reductNewMulti"))):(this.dmgSource="",this.dmgType="",this.curMulti=0,this.newMulti=0)}},{key:"populateValues",value:function(){localStorage.setItem("reductDmgSource",this.dmgSource),localStorage.setItem("reductDmgType",this.dmgType),localStorage.setItem("reductCurMulti",this.curMulti),localStorage.setItem("reductNewMulti",this.newMulti),this.domEl.dmgSource.value=this.dmgSource,this.domEl.dmgType.value=this.dmgType,this.domEl.curMulti.value=this.curMulti,this.domEl.newMulti.value=this.newMulti}},{key:"bindEvents",value:function(){var e=this;this.domEl.calcBtn.onclick=function(){e.updateValues(),e.calcRelativeDamage()}}},{key:"updateValues",value:function(){this.dmgSource=this.domEl.dmgSource.options[this.domEl.dmgSource.selectedIndex].value,this.dmgType=this.domEl.dmgType.options[this.domEl.dmgType.selectedIndex].value,this.curMulti=parseFloat(this.domEl.curMulti.value),this.newMulti=parseFloat(this.domEl.newMulti.value),this.populateValues()}},{key:"calcRelativeDamage",value:function(){var e=0,t=0;""!=this.dmgSource&&""!=this.dmgType&&this.newMulti>this.curMulti&&(e=this.formulas.calcDamageIncrease(this.curMulti,this.newMulti,this.dmgSource,this.dmgType),t=this.formulas.calcStageIncrease(e.toFixed(3)),this.domEl.dmgIncrease.innerHTML=e.toFixed(3)+"x",this.domEl.stageIncrease.innerHTML=t)}},{key:"getEl",value:function(e){return document.getElementById(e)}}]),e}();new reductionsCalc;